{
  "slug": "components/comments",
  "title": "Comments",
  "package": {
    "name": "@choice-ui/comments",
    "version": "0.0.4",
    "description": "A rich text comment system component with threading, mentions, and emoji support",
    "dependencies": {
      "@choice-ui/avatar": "workspace:*",
      "@choice-ui/button": "workspace:*",
      "@choice-ui/shared": "workspace:*",
      "@choice-ui/dialog": "workspace:*",
      "@choice-ui/dropdown": "workspace:*",
      "@choice-ui/emoji-picker": "workspace:*",
      "@choice-ui/icon-button": "workspace:*",
      "@choiceform/icons-react": "^1.3.8",
      "@choice-ui/menus": "workspace:*",
      "@choice-ui/picture-preview": "workspace:*",
      "@choice-ui/popover": "workspace:*",
      "@choice-ui/scroll-area": "workspace:*",
      "@choice-ui/tooltip": "workspace:*",
      "@date-fns/tz": "^1.2.0",
      "@floating-ui/react": "0.27.15",
      "@legendapp/state": "v3.0.0-beta.26",
      "date-fns": "^4.1.0",
      "is-hotkey": "^0.2.0",
      "nanoid": "^5.1.6",
      "slate": "^0.120.0",
      "slate-history": "^0.113.1",
      "slate-react": "^0.120.0",
      "usehooks-ts": "^3.1.0"
    },
    "peerDependencies": {
      "react": ">=18.0.0",
      "react-dom": ">=18.0.0"
    }
  },
  "exports": [
    "Comments",
    "type CommentInputProps",
    "CommentInput",
    "type CustomEditor",
    "type ExtendedRenderElement",
    "type ParagraphElement",
    "type StructuredData",
    "type MentionElement",
    "type Attachment",
    "type ImageElement",
    "type ListItemElement",
    "type NumberedListElement",
    "type BulletedListElement",
    "type CustomElement",
    "type CustomText",
    "CommentItem",
    "type CommentItemProps",
    "comments$",
    "sortedComments$",
    "allComments$",
    "commentsService",
    "useCommentsState",
    "type User",
    "type Reaction",
    "type SubmittedCommentData",
    "type InputDefaultText",
    "type ItemDefaultText",
    "type DefaultText"
  ],
  "props": [
    {
      "displayName": "CommentsComponent",
      "description": "",
      "props": [
        {
          "name": "author",
          "type": "User",
          "required": true,
          "description": ""
        },
        {
          "name": "className",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "defaultText",
          "type": "DefaultText | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "fetchMoreComments",
          "type": "((page: number, pageSize: number) => Promise<{ comments: SubmittedCommentData[]; totalCount: number; }>) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "initialComments",
          "type": "SubmittedCommentData[] | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "totalCount",
          "type": "number | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "users",
          "type": "User[] | undefined",
          "required": false,
          "description": ""
        }
      ]
    },
    {
      "displayName": "CommentInput",
      "description": "",
      "props": [
        {
          "name": "className",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "defaultText",
          "type": "InputDefaultText | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "initialValue",
          "type": "Descendant[] | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "maxUploadFiles",
          "type": "number | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onCancel",
          "type": "(() => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onChange",
          "type": "((value: Descendant[]) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onSubmit",
          "type": "((value: Descendant[]) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "onTypingChange",
          "type": "((isTyping: boolean) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "placeholder",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "users",
          "type": "User[] | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "variant",
          "type": "undefined | \"default\" | \"solid\"",
          "required": false,
          "description": ""
        },
        {
          "name": "showMentionButton",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "showEmojiButton",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "showImageUploadButton",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        }
      ]
    },
    {
      "displayName": "CommentItem",
      "description": "",
      "props": [
        {
          "name": "author",
          "type": "User",
          "required": true,
          "description": ""
        },
        {
          "name": "className",
          "type": "string | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "created_at",
          "type": "Date",
          "required": true,
          "description": ""
        },
        {
          "name": "defaultText",
          "type": "ItemDefaultText | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "handleOnDelete",
          "type": "(() => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "handleOnEdit",
          "type": "(() => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "handleOnImageClick",
          "type": "((attachmentIndex?: number | undefined) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "handleOnReactionClick",
          "type": "((reaction: GroupedReaction) => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "handleOnReactionPopoverClick",
          "type": "(() => void) | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "locale",
          "type": "undefined | \"zh-cn\" | \"en-us\"",
          "required": false,
          "description": ""
        },
        {
          "name": "message_meta",
          "type": "Descendant[]",
          "required": true,
          "description": ""
        },
        {
          "name": "reactionAnchorRef",
          "type": "RefObject<HTMLButtonElement> | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "reactions",
          "type": "Reaction[] | null",
          "required": true,
          "description": ""
        },
        {
          "name": "reactionsPopoverIsOpen",
          "type": "boolean | undefined",
          "required": false,
          "description": ""
        },
        {
          "name": "ref",
          "type": "((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null | undefined",
          "required": false,
          "description": ""
        }
      ]
    },
    {
      "displayName": "startEditing",
      "description": "",
      "props": []
    },
    {
      "displayName": "setEditingContent",
      "description": "",
      "props": []
    },
    {
      "displayName": "deleteComment",
      "description": "",
      "props": []
    },
    {
      "displayName": "loadMoreComments",
      "description": "",
      "props": []
    }
  ],
  "stories": [
    {
      "id": "components-comments--basic",
      "name": "Basic",
      "exportName": "Basic",
      "description": "Basic Comments Component\n\nDemonstrates the full-featured Comments component with:\n- Lazy loading pagination for large comment lists\n- Real-time state management using Legend State\n- Dialog-based comment viewer with draggable support\n- Debug tools for testing state changes\n\nFeatures:\n- Efficient polling with hash comparison to prevent unnecessary re-renders\n- Proper cleanup on unmount to prevent memory leaks\n- Safe null checks for all state accesses",
      "source": "import { Comments } from \"@choice-ui/comments\"\nimport { useState, useEffect, useCallback, useRef } from \"react\"\n\nexport default function App() {\n\n  const [openDialog, setOpenDialog] = useState(false)\n  const [initialComments] = useState<SubmittedCommentData[]>([])\n  const [totalCount] = useState(0)\n  const [loadedComments, setLoadedComments] = useState<SubmittedCommentData[]>([])\n  const lastCommentsHashRef = useRef<string>(\"\")\n  const isMountedRef = useRef(true)\n\n  useEffect(() => {\n    isMountedRef.current = true\n    resetCommentState()\n\n    const updateCommentsIfChanged = () => {\n      if (!isMountedRef.current) return\n\n      const state = comments$.get()\n      if (!state?.order || !state?.byId) return\n\n      const commentsList = state.order\n        .map((id) => state.byId[id])\n        .filter((c): c is SubmittedCommentData => c != null)\n      const commentsHash = JSON.stringify(commentsList.map((c) => c.uuid))\n\n      if (commentsHash !== lastCommentsHashRef.current) {\n        lastCommentsHashRef.current = commentsHash\n        setLoadedComments(commentsList)\n      }\n    }\n\n    const intervalId = setInterval(updateCommentsIfChanged, 500)\n    updateCommentsIfChanged()\n\n    return () => {\n      isMountedRef.current = false\n      clearInterval(intervalId)\n      resetCommentState()\n    }\n  }, [])\n\n  const handleResetState = useCallback(() => {\n    resetCommentState()\n    setLoadedComments([])\n  }, [])\n\n  const handleAddComment = useCallback(() => {\n    const currentState = comments$.get()\n    if (!currentState) return\n\n    const newId = `comment-${Date.now()}`\n    const newComment: SubmittedCommentData = {\n      uuid: newId,\n      author: mockUsers[0],\n      created_at: new Date(),\n      deleted_at: null,\n      is_deleted: false,\n      message: \"This is a test comment\",\n      message_meta: [\n        {\n          type: \"paragraph\",\n          children: [{ text: \"This is a test comment\" }],\n        },\n      ],\n      order_id: null,\n      page_id: null,\n      reactions: null,\n      resolved_at: null,\n      updated_at: new Date(),\n    }\n\n    comments$.set({\n      ...currentState,\n      byId: {\n        ...currentState.byId,\n        [newId]: newComment,\n      },\n      order: [...currentState.order, newId],\n    })\n  }, [])\n\n  const paginationState = comments$.pagination.get()\n  const isEmpty = comments$.get()?.order?.length === 0\n\n  return (\n    <>\n      <Dialog\n        open={openDialog}\n        onOpenChange={setOpenDialog}\n        className=\"overflow-hidden\"\n        draggable\n        outsidePress\n      >\n        {isEmpty ? null : <Dialog.Header title=\"Comments - Lazy Loading Example\" />}\n        <Dialog.Content className={tcx(isEmpty ? \"w-[296px]\" : \"w-[360px]\")}>\n          <Comments\n            className=\"flex max-h-[512px] flex-col overflow-hidden\"\n            initialComments={initialComments}\n            totalCount={totalCount}\n            fetchMoreComments={fetchComments}\n            users={mockUsers}\n            author={mockUsers[0]}\n          />\n        </Dialog.Content>\n      </Dialog>\n\n      <div className=\"flex items-center gap-4\">\n        <div className=\"grid grid-cols-2 gap-2\">\n          <div className=\"text-secondary-foreground p-2\">\n            <h3 className=\"text-body-medium mb-2\">Loaded Comments ({loadedComments.length})</h3>\n            {loadedComments.length === 0 ? (\n              <p className=\"text-secondary-foreground\">No comments</p>\n            ) : (\n              <div className=\"space-y-4\">\n                {loadedComments.map((item) => (\n                  <div\n                    key={item.uuid}\n                    className=\"border-l-2 border-blue-400 pl-2\"\n                  >\n                    <p>\n                      <strong>Comment {item.uuid}</strong> - Page: {item.page_id ?? \"N/A\"} -{\" \"}\n                      {item.author?.name ?? \"Unknown\"} at {item.created_at?.toLocaleString() ?? \"N/A\"}\n                    </p>\n                    <p className=\"text-secondary-foreground mt-1\">{item.message}</p>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n          <div className=\"space-y-4\">\n            <Button onClick={() => setOpenDialog(true)}>Open Dialog</Button>\n            <div className=\"bg-menu-background w-full rounded-xl p-4 text-white\">\n              <h3 className=\"text-body-medium\">State Monitor</h3>\n              <div className=\"space-y-2\">\n                <p className=\"text-white/50\">Loaded: {loadedComments.length}</p>\n                <p className=\"text-white/50\">Total: {totalCount}</p>\n                <p className=\"text-white/50\">\n                  Page: {paginationState?.currentPage ?? 1},{\" \"}\n                  {paginationState?.hasMore ? \"Has more\" : \"No more\"}\n                </p>\n                <p className=\"text-white/50\">\n                  Status: {paginationState?.isLoading ? \"Loading\" : \"Idle\"}\n                </p>\n              </div>\n            </div>\n            <div className=\"mt-4 flex gap-2\">\n              <Button\n                variant=\"secondary\"\n                onClick={handleResetState}\n              >\n                Reset State\n              </Button>\n              <Button\n                variant=\"secondary\"\n                onClick={handleAddComment}\n              >\n                Add Comment\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n\n}"
    },
    {
      "id": "components-comments--comment-input-basic",
      "name": "Comment Input Basic",
      "exportName": "CommentInputBasic",
      "description": "Comment Input - Default Variant\n\nA rich text input component for composing comments with:\n-",
      "source": "import { CommentInput } from \"@choice-ui/comments\"\nimport { useState, useCallback } from \"react\"\n\nexport default function App() {\n\n  const [, setValue] = useState<Descendant[]>([])\n\n  const handleChange = useCallback((newValue: Descendant[]) => {\n    setValue(newValue)\n  }, [])\n\n  const handleSubmit = useCallback((data: Descendant[]) => {\n    console.log(\"Submitted:\", data)\n    setValue([])\n  }, [])\n\n  return (\n    <div className=\"flex w-96 flex-col gap-4\">\n      <div className=\"grid grid-cols-[auto_1fr] items-start gap-2\">\n        <div className=\"flex size-10 items-center justify-center\">\n          <Avatar\n            photo=\"https://github.com/shadcn.png\"\n            name=\"You\"\n            size=\"large\"\n          />\n        </div>\n        <div className=\"flex flex-col\">\n          <CommentInput\n            className=\"w-full\"\n            placeholder=\"Add a comment, use @ to mention users...\"\n            users={mockUsers}\n            onChange={handleChange}\n            onSubmit={handleSubmit}\n          />\n        </div>\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "components-comments--comment-input-solid",
      "name": "Comment Input Solid",
      "exportName": "CommentInputSolid",
      "description": "Comment Input - Solid Variant\n\nAlternative visual style with solid background for better contrast.\nUseful in contexts where the input needs more visual prominence.\n\nFeatures same functionality as Basic variant with different styling.",
      "source": "import { CommentInput } from \"@choice-ui/comments\"\nimport { useState, useCallback } from \"react\"\n\nexport default function App() {\n\n  const [, setValue] = useState<Descendant[]>([])\n\n  const handleChange = useCallback((newValue: Descendant[]) => {\n    setValue(newValue)\n  }, [])\n\n  const handleSubmit = useCallback((data: Descendant[]) => {\n    console.log(\"Submitted:\", data)\n    setValue([])\n  }, [])\n\n  return (\n    <div className=\"flex w-96 flex-col gap-4\">\n      <div className=\"grid grid-cols-[auto_1fr] items-start gap-2\">\n        <div className=\"flex size-10 items-center justify-center\">\n          <Avatar\n            photo=\"https://github.com/shadcn.png\"\n            name=\"You\"\n            size=\"large\"\n          />\n        </div>\n        <div className=\"flex flex-col\">\n          <CommentInput\n            className=\"w-full\"\n            variant=\"solid\"\n            placeholder=\"Add a comment, use @ to mention users...\"\n            users={mockUsers}\n            onChange={handleChange}\n            onSubmit={handleSubmit}\n          />\n        </div>\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "components-comments--comment-input-no-users",
      "name": "Comment Input No Users",
      "exportName": "CommentInputNoUsers",
      "description": "Comment Input - No Users\n\nDemonstrates the input without",
      "source": "import { CommentInput } from \"@choice-ui/comments\"\nimport { useState, useCallback } from \"react\"\n\nexport default function App() {\n\n  const [, setValue] = useState<Descendant[]>([])\n\n  const handleChange = useCallback((newValue: Descendant[]) => {\n    setValue(newValue)\n  }, [])\n\n  const handleSubmit = useCallback((data: Descendant[]) => {\n    console.log(\"Submitted:\", data)\n    setValue([])\n  }, [])\n\n  return (\n    <div className=\"flex w-96 flex-col gap-4\">\n      <div className=\"grid grid-cols-[auto_1fr] items-start gap-2\">\n        <div className=\"flex size-10 items-center justify-center\">\n          <Avatar\n            photo=\"https://github.com/shadcn.png\"\n            name=\"You\"\n            size=\"large\"\n          />\n        </div>\n        <div className=\"flex flex-col\">\n          <CommentInput\n            className=\"w-full\"\n            placeholder=\"This example has no users to @mention\"\n            onChange={handleChange}\n            onSubmit={handleSubmit}\n          />\n        </div>\n      </div>\n    </div>\n  )\n\n}"
    },
    {
      "id": "components-comments--comment-item-basic",
      "name": "Comment Item Basic",
      "exportName": "CommentItemBasic",
      "description": "Comment Item - Basic\n\nDisplays a single comment with author avatar, name, timestamp, and content.\nThis is the fundamental building block for comment lists.\n\nFeatures:\n- Relative time formatting (e.g., \"2 hours ago\")\n- Author information display\n- Clean, minimal design",
      "source": "import { CommentItem } from \"@choice-ui/comments\"\nimport { useMemo } from \"react\"\n\nexport default function App() {\n\n  const createdAt = useMemo(() => new Date(Date.now() - 2 * 60 * 60 * 1000), [])\n  const messageMeta = useMemo<CustomElement[]>(\n    () => [\n      {\n        type: \"paragraph\",\n        children: [{ text: \"This is a basic comment without any formatting.\" }],\n      } as CustomElement,\n    ],\n    [],\n  )\n\n  return (\n    <CommentItem\n      author={mockUser}\n      created_at={createdAt}\n      message_meta={messageMeta}\n      reactions={null}\n      locale=\"en-us\"\n    />\n  )\n\n}"
    },
    {
      "id": "components-comments--comment-item-with-formatting",
      "name": "Comment Item With Formatting",
      "exportName": "CommentItemWithFormatting",
      "description": "Comment Item - With Rich Text Formatting\n\nDemonstrates comment content with inline text formatting:\n- Bold text\n- Italic text\n- Underlined text\n- Strikethrough text\n\nShows how the component renders Slate.js rich text content.",
      "source": "import { CommentItem } from \"@choice-ui/comments\"\nimport { useMemo } from \"react\"\n\nexport default function App() {\n\n  const createdAt = useMemo(() => new Date(Date.now() - 86400000), [])\n  const messageMeta = useMemo<CustomElement[]>(\n    () => [\n      {\n        type: \"paragraph\",\n        children: [\n          { text: \"This comment has \" },\n          { text: \"bold\", bold: true },\n          { text: \", \" },\n          { text: \"italic\", italic: true },\n          { text: \", and \" },\n          { text: \"underlined\", underline: true },\n          { text: \" text, as well as \" },\n          { text: \"strikethrough\", strikethrough: true },\n          { text: \".\" },\n        ],\n      } as CustomElement,\n    ],\n    [],\n  )\n\n  return (\n    <CommentItem\n      author={{\n        id: \"2\",\n        name: \"John Smith\",\n        email: \"john@example.com\",\n        photo_url: \"https://i.pravatar.cc/150?img=2\",\n        color: null,\n      }}\n      created_at={createdAt}\n      message_meta={messageMeta}\n      reactions={null}\n      locale=\"en-us\"\n    />\n  )\n\n}"
    },
    {
      "id": "components-comments--comment-item-recent",
      "name": "Comment Item Recent",
      "exportName": "CommentItemRecent",
      "description": "Comment Item - Recent (Within Today)\n\nShows relative time formatting for recent comments.\nDisplays \"X hours ago\" format for comments posted today.\n\nDemonstrates time-based display logic.",
      "source": "import { CommentItem } from \"@choice-ui/comments\"\nimport { useMemo } from \"react\"\n\nexport default function App() {\n\n  const createdAt = useMemo(() => new Date(Date.now() - 2 * 60 * 60 * 1000), [])\n  const messageMeta = useMemo<CustomElement[]>(\n    () => [\n      {\n        type: \"paragraph\",\n        children: [{ text: \"This comment was posted recently, showing relative time format.\" }],\n      } as CustomElement,\n    ],\n    [],\n  )\n\n  return (\n    <CommentItem\n      author={{\n        id: \"9\",\n        name: \"Rebecca Moore\",\n        email: \"rebecca@example.com\",\n        photo_url: \"https://i.pravatar.cc/150?img=9\",\n        color: null,\n      }}\n      created_at={createdAt}\n      message_meta={messageMeta}\n      reactions={null}\n      locale=\"en-us\"\n    />\n  )\n\n}"
    },
    {
      "id": "components-comments--comment-item-this-year",
      "name": "Comment Item This Year",
      "exportName": "CommentItemThisYear",
      "description": "Comment Item - This Year\n\nShows date formatting for comments from current year.\nDisplays month and day without year (e.g., \"Oct 15\").\n\nDemonstrates year-aware date formatting.",
      "source": "import { CommentItem } from \"@choice-ui/comments\"\nimport { useMemo } from \"react\"\n\nexport default function App() {\n\n  const createdAt = useMemo(() => {\n    const date = new Date()\n    date.setMonth(date.getMonth() - 3)\n    return date\n  }, [])\n  const messageMeta = useMemo<CustomElement[]>(\n    () => [\n      {\n        type: \"paragraph\",\n        children: [{ text: \"This comment was posted within this year, showing month and day.\" }],\n      } as CustomElement,\n    ],\n    [],\n  )\n\n  return (\n    <CommentItem\n      author={{\n        id: \"10\",\n        name: \"Thomas Wilson\",\n        email: \"thomas@example.com\",\n        photo_url: \"https://i.pravatar.cc/150?img=10\",\n        color: null,\n      }}\n      created_at={createdAt}\n      message_meta={messageMeta}\n      reactions={null}\n      locale=\"en-us\"\n    />\n  )\n\n}"
    },
    {
      "id": "components-comments--comment-item-last-year",
      "name": "Comment Item Last Year",
      "exportName": "CommentItemLastYear",
      "description": "Comment Item - Last Year\n\nShows full date formatting for older comments.\nDisplays complete date with year (e.g., \"Oct 15, 2024\").\n\nDemonstrates full date format for historical comments.",
      "source": "import { CommentItem } from \"@choice-ui/comments\"\nimport { useMemo } from \"react\"\n\nexport default function App() {\n\n  const createdAt = useMemo(() => {\n    const date = new Date()\n    date.setFullYear(date.getFullYear() - 1)\n    return date\n  }, [])\n  const messageMeta = useMemo<CustomElement[]>(\n    () => [\n      {\n        type: \"paragraph\",\n        children: [{ text: \"This comment was posted last year, showing the full date format.\" }],\n      } as CustomElement,\n    ],\n    [],\n  )\n\n  return (\n    <CommentItem\n      author={{\n        id: \"11\",\n        name: \"Patricia Clark\",\n        email: \"patricia@example.com\",\n        photo_url: \"https://i.pravatar.cc/150?img=11\",\n        color: null,\n      }}\n      created_at={createdAt}\n      message_meta={messageMeta}\n      reactions={null}\n      locale=\"en-us\"\n    />\n  )\n\n}"
    },
    {
      "id": "components-comments--comment-item-with-mention-and-image",
      "name": "Comment Item With Mention And Image",
      "exportName": "CommentItemWithMentionAndImage",
      "description": "Comment Item - With",
      "source": "import { CommentItem } from \"@choice-ui/comments\"\nimport { useMemo } from \"react\"\n\nexport default function App() {\n\n  const createdAt = useMemo(() => new Date(Date.now() - 5 * 60 * 60 * 1000), [])\n  const messageMeta = useMemo<CustomElement[]>(\n    () => [\n      {\n        type: \"paragraph\",\n        children: [\n          { text: \"Take a look at this image \" },\n          {\n            type: \"mention\",\n            user: {\n              id: \"user-1\",\n              name: \"Sarah Parker\",\n              photo_url: \"https://i.pravatar.cc/150?img=5\",\n              email: \"sarah.parker@example.com\",\n              color: null,\n            },\n            children: [{ text: \"\" }],\n          } as CustomElement,\n          { text: \" shared:\" },\n        ],\n      } as CustomElement,\n      {\n        type: \"image\",\n        attachments: [\n          {\n            url: \"https://images.unsplash.com/photo-1745750747234-5df61f67a7bc?q=80&w=5070&auto=format&fit=crop\",\n            name: \"Nature Image\",\n          },\n        ],\n        children: [{ text: \"\" }],\n      } as CustomElement,\n      {\n        type: \"paragraph\",\n        children: [\n          { text: \"What do you think? \" },\n          {\n            type: \"mention\",\n            user: {\n              id: \"user-2\",\n              name: \"Robert Davis\",\n              photo_url: \"https://i.pravatar.cc/150?img=8\",\n              email: \"robert.davis@example.com\",\n              color: null,\n            },\n            children: [{ text: \"\" }],\n          } as CustomElement,\n          { text: \" might have some thoughts on this.\" },\n        ],\n      } as CustomElement,\n    ],\n    [],\n  )\n\n  return (\n    <CommentItem\n      author={{\n        id: \"3\",\n        name: \"Alex Johnson\",\n        email: \"alex@example.com\",\n        photo_url: \"https://i.pravatar.cc/150?img=3\",\n        color: null,\n      }}\n      created_at={createdAt}\n      message_meta={messageMeta}\n      reactions={null}\n      locale=\"en-us\"\n    />\n  )\n\n}"
    },
    {
      "id": "components-comments--comment-item-with-lists",
      "name": "Comment Item With Lists",
      "exportName": "CommentItemWithLists",
      "description": "Comment Item - With Lists\n\nDemonstrates list formatting in comments:\n- Bulleted (unordered) lists\n- Numbered (ordered) lists\n- Rich text within list items\n\nShows complex content structure support.",
      "source": "import { CommentItem } from \"@choice-ui/comments\"\nimport { useMemo } from \"react\"\n\nexport default function App() {\n\n  const createdAt = useMemo(() => new Date(Date.now() - 24 * 60 * 60 * 1000), [])\n  const messageMeta = useMemo<CustomElement[]>(\n    () => [\n      {\n        type: \"paragraph\",\n        children: [{ text: \"Here are some key points:\" }],\n      } as CustomElement,\n      {\n        type: \"bulleted-list\",\n        children: [\n          {\n            type: \"list-item\",\n            children: [{ text: \"First bullet point\" }],\n          } as CustomElement,\n          {\n            type: \"list-item\",\n            children: [{ text: \"Second bullet point with \" }, { text: \"formatting\", bold: true }],\n          } as CustomElement,\n          {\n            type: \"list-item\",\n            children: [{ text: \"Third bullet point\" }],\n          } as CustomElement,\n        ],\n      } as CustomElement,\n      {\n        type: \"paragraph\",\n        children: [{ text: \"And a numbered list:\" }],\n      } as CustomElement,\n      {\n        type: \"numbered-list\",\n        children: [\n          {\n            type: \"list-item\",\n            children: [{ text: \"First numbered item\" }],\n          } as CustomElement,\n          {\n            type: \"list-item\",\n            children: [{ text: \"Second numbered item\" }],\n          } as CustomElement,\n          {\n            type: \"list-item\",\n            children: [{ text: \"Third numbered item\" }],\n          } as CustomElement,\n        ],\n      } as CustomElement,\n    ],\n    [],\n  )\n\n  return (\n    <CommentItem\n      author={{\n        id: \"4\",\n        name: \"Emily Wilson\",\n        email: \"emily@example.com\",\n        photo_url: \"https://i.pravatar.cc/150?img=4\",\n        color: null,\n      }}\n      created_at={createdAt}\n      message_meta={messageMeta}\n      reactions={null}\n      locale=\"en-us\"\n    />\n  )\n\n}"
    },
    {
      "id": "components-comments--comment-item-multiple-images",
      "name": "Comment Item Multiple Images",
      "exportName": "CommentItemMultipleImages",
      "description": "Comment Item - Multiple Images with Preview\n\nInteractive example with:\n- Multiple image attachments in a grid\n- Click-to-preview functionality\n- Dialog-based image viewer with PicturePreview\n\nPerformance optimizations:\n- Memoized data structures\n- Stable callback references\n- Conditional dialog rendering",
      "source": "import { CommentItem } from \"@choice-ui/comments\"\nimport { useState, useCallback, useMemo } from \"react\"\n\nexport default function App() {\n\n  const [isOpen, setIsOpen] = useState(false)\n  const [imageIndex, setImageIndex] = useState<number | undefined>(undefined)\n\n  const messageMeta = useMemo<Descendant[]>(\n    () => [\n      {\n        type: \"paragraph\",\n        children: [{ text: \"Check out these images from our trip:\" }],\n      } as CustomElement,\n      {\n        type: \"image\",\n        attachments: [\n          {\n            url: \"https://images.unsplash.com/photo-1745750747234-5df61f67a7bc?q=80&w=5070&auto=format&fit=crop\",\n            name: \"Beach\",\n          },\n          {\n            url: \"https://images.unsplash.com/photo-1739989934289-4cb75f451a56?q=80&w=5070&auto=format&fit=crop\",\n            name: \"Mountains\",\n          },\n          {\n            url: \"https://images.unsplash.com/photo-1746071062150-b12db59e9c53?q=80&w=2048&auto=format&fit=crop\",\n            name: \"Forest\",\n          },\n          {\n            url: \"https://images.unsplash.com/photo-1745659601865-1af86dec8bcd?q=80&w=3183&auto=format&fit=crop\",\n            name: \"City\",\n          },\n        ],\n        children: [{ text: \"\" }],\n      } as CustomElement,\n      {\n        type: \"paragraph\",\n        children: [{ text: \"It was an amazing experience!\" }],\n      } as CustomElement,\n    ],\n    [],\n  )\n\n  const currentImage = useMemo(() => {\n    if (imageIndex === undefined) return null\n\n    const imageElement = messageMeta.find(\n      (item) => (item as CustomElement).type === \"image\",\n    ) as ImageElement | undefined\n\n    if (!imageElement?.attachments) return null\n    return imageElement.attachments[imageIndex] ?? null\n  }, [messageMeta, imageIndex])\n\n  const author = useMemo<User>(\n    () => ({\n      id: \"1\",\n      name: \"Jane Doe\",\n      email: \"jane@example.com\",\n      photo_url: \"https://i.pravatar.cc/150?img=1\",\n      color: null,\n    }),\n    [],\n  )\n\n  const createdAt = useMemo(() => new Date(), [])\n\n  const handleImageClick = useCallback((index?: number) => {\n    if (index === undefined) return\n    setImageIndex(index)\n    setIsOpen(true)\n  }, [])\n\n  const handleDialogClose = useCallback((open: boolean) => {\n    setIsOpen(open)\n    if (!open) {\n      setImageIndex(undefined)\n    }\n  }, [])\n\n  return (\n    <>\n      <CommentItem\n        author={author}\n        created_at={createdAt}\n        message_meta={messageMeta}\n        reactions={null}\n        handleOnImageClick={handleImageClick}\n        locale=\"en-us\"\n      />\n      {isOpen && currentImage && (\n        <Dialog\n          open={isOpen}\n          onOpenChange={handleDialogClose}\n          outsidePress\n          className=\"overflow-hidden\"\n        >\n          <Dialog.Header title={currentImage.name ?? \"Image Preview\"} />\n          <Dialog.Content className=\"overflow-hidden p-0\">\n            <PicturePreview\n              src={currentImage.url}\n              fileName={currentImage.name}\n            />\n          </Dialog.Content>\n        </Dialog>\n      )}\n    </>\n  )\n\n}"
    }
  ],
  "tags": [
    "experimental"
  ]
}